
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uber Simulation Performance Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .chart-container {
            width: 80%;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            text-align: center;
            color: #333;
        }
        p {
            max-width: 800px;
            margin: 20px auto;
            line-height: 1.6;
        }
        .legend {
            margin: 20px auto;
            max-width: 800px;
            padding: 15px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .legend h3 {
            margin-top: 0;
        }
        .legend ul {
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <h1>Uber Simulation Performance Analysis</h1>
    
    <div class="legend">
        <h3>Configuration Legend:</h3>
        <ul>
            <li><strong>B</strong>: Base implementation (simulated SQL database)</li>
            <li><strong>B+M</strong>: Base + MongoDB</li>
            <li><strong>B+S</strong>: Base + SQL Caching with Redis</li>
            <li><strong>B+M+S+K</strong>: Base + MongoDB + SQL Caching + Kafka Messaging (full stack)</li>
        </ul>
    </div>
    
    <div class="chart-container">
        <h2>Requests Per Second</h2>
        <canvas id="rps-chart"></canvas>
    </div>
    
    <div class="chart-container">
        <h2>Response Time (ms)</h2>
        <canvas id="response-chart"></canvas>
    </div>
    
    <div class="chart-container">
        <h2>Throughput</h2>
        <canvas id="throughput-chart"></canvas>
    </div>
    
    <p>
        <strong>Analysis:</strong> This performance comparison demonstrates the impact of different architectural choices on system performance.
        MongoDB provides better read performance compared to traditional SQL databases for our use case. Adding Redis caching significantly
        improves performance by reducing database load. The full stack configuration with Kafka messaging shows a slight performance tradeoff
        due to the overhead of message processing, but enables crucial distributed functionality needed for the Uber simulation.
    </p>

    <script>
        // Performance data
        const data = {"B":{"requestsPerSecond":2,"responseTime":495,"throughput":1.6},"BM":{"requestsPerSecond":2,"responseTime":494,"throughput":1.6},"BS":{"requestsPerSecond":17,"responseTime":59,"throughput":13.600000000000001},"BMSK":{"requestsPerSecond":34,"responseTime":29,"throughput":27.200000000000003}};
        
        // Configuration labels
        const labels = ['B', 'B+M', 'B+S', 'B+M+S+K'];
        
        // Chart colors
        const colors = {
            rps: 'rgba(54, 162, 235, 0.7)',
            response: 'rgba(255, 99, 132, 0.7)',
            throughput: 'rgba(75, 192, 192, 0.7)'
        };
        
        // Requests per second chart
        new Chart(document.getElementById('rps-chart'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Requests per Second',
                    data: [
                        data.B.requestsPerSecond, 
                        data.BM.requestsPerSecond, 
                        data.BS.requestsPerSecond, 
                        data.BMSK.requestsPerSecond
                    ],
                    backgroundColor: colors.rps,
                    borderColor: colors.rps.replace('0.7', '1'),
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Requests/Second'
                        }
                    }
                }
            }
        });
        
        // Response time chart
        new Chart(document.getElementById('response-chart'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Response Time (ms)',
                    data: [
                        data.B.responseTime, 
                        data.BM.responseTime, 
                        data.BS.responseTime, 
                        data.BMSK.responseTime
                    ],
                    backgroundColor: colors.response,
                    borderColor: colors.response.replace('0.7', '1'),
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Milliseconds'
                        }
                    }
                }
            }
        });
        
        // Throughput chart
        new Chart(document.getElementById('throughput-chart'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Throughput',
                    data: [
                        data.B.throughput, 
                        data.BM.throughput, 
                        data.BS.throughput, 
                        data.BMSK.throughput
                    ],
                    backgroundColor: colors.throughput,
                    borderColor: colors.throughput.replace('0.7', '1'),
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Effective Throughput'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
